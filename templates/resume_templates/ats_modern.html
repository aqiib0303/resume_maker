<!-- templates/resume_templates/ats_modern.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{ (data.name if data and data.name is defined else "Your Name") ~ " - Resume" }}</title>

  <!-- Print-safe sizing and margins -->
  <style>
    :root{
      --ink:#0b1220;
      --muted:#475569;    /* slate-600 */
      --rule:#e2e8f0;     /* slate-200 */
      --accent:#1f2937;   /* slate-800 for headings */
    }

    @page { size: A4; margin: 16mm 14mm; }

    html, body {
      background:#ffffff;
      color:var(--ink);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      line-height:1.42;
    }

    body { margin:0; }

    .page {
      max-width: 800px;
      margin: 0 auto;
      padding: 18px;
    }

    /* Header */
    .header {
      display:block;
      margin-bottom: 16px;
      border-bottom: 2px solid var(--rule);
      padding-bottom: 10px;
    }

    .name {
      font-size: 28px;
      font-weight: 800;
      letter-spacing: -0.01em;
      color: var(--accent);
      margin: 0 0 4px 0;
      line-height: 1.1;
    }

    .role {
      font-size: 14px;
      font-weight: 600;
      color: var(--muted);
      margin: 0 0 10px 0;
    }

    .contact {
      display:flex;
      flex-wrap:wrap;
      gap: 8px 12px;
      font-size: 12.5px;
      color: var(--ink);
    }
    .contact-item {
      padding: 4px 8px;
      border:1px solid var(--rule);
      border-radius: 999px;
      white-space: nowrap;
    }
    .contact-item a { color: inherit; text-decoration: none; }

    /* Sections */
    .section {
      margin-top: 16px;
      page-break-inside: avoid;
    }
    .section h2 {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: .12em;
      color: var(--muted);
      margin: 0 0 8px 0;
      font-weight: 800;
    }
    .rule {
      height:1px; background:var(--rule); margin:8px 0 12px 0;
    }

    /* Summary */
    .summary { font-size: 13.5px; }

    /* Skills */
    .skills-list {
      display:flex; flex-wrap:wrap; gap:8px 10px;
      font-size: 12.5px;
    }
    .skill {
      border: 1px solid var(--rule);
      border-radius: 8px;
      padding: 6px 10px;
      font-weight: 600;
    }

    /* Experience */
    .exp-item { margin-bottom: 12px; }
    .exp-top {
      display:flex; justify-content:space-between; align-items:baseline; gap:12px;
    }
    .exp-role { font-weight: 700; font-size: 14px; }
    .exp-company { color: var(--muted); font-weight: 600; }
    .exp-dates { color: var(--muted); font-size: 12px; white-space: nowrap; }
    .exp-desc {
      margin-top: 6px; font-size: 13px;
    }
    .bullets { margin:6px 0 0 18px; }
    .bullets li { margin: 2px 0; }

    /* Education */
    .edu-item { margin-bottom: 10px; }
    .edu-degree { font-weight:700; font-size: 13.5px; }
    .edu-meta { color: var(--muted); font-size: 12.5px; }

    /* Footnotes / Small text */
    .small { font-size: 11.5px; color: var(--muted); }

    /* Avoid awkward page breaks */
    .exp-item, .edu-item { page-break-inside: avoid; }
  </style>
</head>
<body>
  <div class="page">

    <!-- Header (simple, ATS-first reading order) -->
    <header class="header">
      {% set full_name = data.name if data and data.name is defined else '' %}
      <h1 class="name">{{ full_name or "Your Name" }}</h1>
      {% if data and data.role is defined and data.role %}
        <div class="role">{{ data.role }}</div>
      {% endif %}

      <div class="contact">
        {% set email = data.email if data and data.email is defined else '' %}
        {% set phone = data.phone if data and data.phone is defined else '' %}
        {% set linkedin = data.linkedin if data and data.linkedin is defined else '' %}
        {% set github = data.github if data and data.github is defined else '' %}
        {% set website = data.website if data and data.website is defined else '' %}

        {% if email %}<div class="contact-item"><a href="mailto:{{ email }}">{{ email }}</a></div>{% endif %}
        {% if phone %}<div class="contact-item"><a href="tel:{{ phone | replace(' ','') }}">{{ phone }}</a></div>{% endif %}
        {% if linkedin %}<div class="contact-item"><a href="{{ linkedin }}" target="_blank" rel="noopener">LinkedIn</a></div>{% endif %}
        {% if github %}<div class="contact-item"><a href="{{ github }}" target="_blank" rel="noopener">GitHub</a></div>{% endif %}
        {% if website %}<div class="contact-item"><a href="{{ website }}" target="_blank" rel="noopener">{{ website | replace('https://','') | replace('http://','') }}</a></div>{% endif %}
      </div>
    </header>

    <!-- Summary -->
    {% if data and data.summary is defined and data.summary %}
    <section class="section">
      <h2>Professional Summary</h2>
      <div class="summary">
        {{ data.summary }}
      </div>
    </section>
    {% endif %}

    <!-- Skills -->
    {% set skills = data.skills if data and data.skills is defined and data.skills else [] %}
    {% if skills|length > 0 %}
    <section class="section">
      <h2>Skills</h2>
      <div class="skills-list">
        {% for s in skills %}
          {% if s %}<span class="skill">{{ s }}</span>{% endif %}
        {% endfor %}
      </div>
    </section>
    {% endif %}

    <!-- Experience -->
    {% set experiences = data.experiences if data and data.experiences is defined and data.experiences else [] %}
    {% if experiences|length > 0 %}
    <section class="section">
      <h2>Experience</h2>
      <div class="rule"></div>

      {% for exp in experiences %}
        {% set company = exp.company if exp and exp.company is defined else "" %}
        {% set role = exp.role if exp and exp.role is defined else "" %}
        {% set dates = exp.dates if exp and exp.dates is defined else "" %}
        {% set desc  = exp.desc  if exp and exp.desc  is defined else "" %}

        {% if company or role or dates or desc %}
        <div class="exp-item">
          <div class="exp-top">
            <div>
              {% if role %}<div class="exp-role">{{ role }}</div>{% endif %}
              {% if company %}<div class="exp-company">{{ company }}</div>{% endif %}
            </div>
            {% if dates %}<div class="exp-dates">{{ dates }}</div>{% endif %}
          </div>

          {% if desc %}
            {# Split description into bullets by newline if the user entered multiple lines #}
            {% set lines = (desc|string).replace('\r','').split('\n') %}
            {% set nonempty = [] %}
            {% for L in lines %}
              {% if L.strip() %}{% set _ = nonempty.append(L.strip()) %}{% endif %}
            {% endfor %}
            {% if nonempty|length > 1 %}
              <ul class="bullets">
                {% for b in nonempty %}
                  <li>{{ b }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <div class="exp-desc">{{ desc }}</div>
            {% endif %}
          {% endif %}
        </div>
        {% endif %}
      {% endfor %}
    </section>
    {% endif %}

    <!-- Education -->
    {% set education = data.education if data and data.education is defined and data.education else [] %}
    {% if education|length > 0 %}
    <section class="section">
      <h2>Education</h2>
      <div class="rule"></div>

      {% for edu in education %}
        {% set school = edu.school if edu and edu.school is defined else "" %}
        {% set degree = edu.degree if edu and edu.degree is defined else "" %}
        {% set edates = edu.dates if edu and edu.dates is defined else "" %}

        {% if school or degree or edates %}
        <div class="edu-item">
          {% if degree %}<div class="edu-degree">{{ degree }}</div>{% endif %}
          <div class="edu-meta">
            {% if school %}<span>{{ school }}</span>{% endif %}
            {% if school and edates %}&nbsp;•&nbsp;{% endif %}
            {% if edates %}<span>{{ edates }}</span>{% endif %}
          </div>
        </div>
        {% endif %}
      {% endfor %}
    </section>
    {% endif %}

    <!-- Optional: tiny footer for ATS context; omit if empty -->
    {% if data and (data.email or data.phone) %}
    <section class="section small">
      <div class="rule"></div>
      <div>
        {{ data.name if data and data.name }} — {{ data.role if data and data.role }}{% if data.role and (data.email or data.phone) %} • {% endif %}{% if data.email %}{{ data.email }}{% endif %}{% if data.email and data.phone %} • {% endif %}{% if data.phone %}{{ data.phone }}{% endif %}
      </div>
    </section>
    {% endif %}
  </div>
</body>
</html>
